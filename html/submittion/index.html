<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="shortcut icon" href="/style/favicon.ico" type="image/x-icon">
    <!-- After Meta -->
    <title>Music Suggestions</title>

    <!-- Stylesheets -->
    <link rel="stylesheet" href="/frameworks/bootstrap.min.css">
    <link rel="stylesheet" href="/style/index.css">
    <link rel="stylesheet" href="/frameworks/fonts/font-awesome.min.css">
    <style>
    .buttonload {
        background-color: #4CAF50; /* Green background */
        border: none; /* Remove borders */
        color: white; /* White text */
        padding: 12px 24px; /* Some padding */
        font-size: 16px; /* Set a font-size */
    }

    /* Add a right margin to each icon */
    .fa {
        margin-left: -12px;
        margin-right: 8px;
    }
    </style>
  </head>
  <body>
    <div class="login-page">
      <div class="form">
        <p id="reply"></p>
        <form class="login-form" action="javascript:return;" onsubmit="return submitSuggestion();">
          <input type="text" name="songName" placeholder="Song Name"/>
          <input type="text" name="artist" placeholder="Artist (Only One Of Them If Multiple)"/>
          <button class="buttonload"><span id="spinner"></span>SUBMIT</button>
        </form>
      </div>
    </div>
    <div class="select-page">
      <div id="content">
        <table class="table">
          <tbody id="songs">
            <button type="button" class="btn btn-danger btn-lg btn-block" width="100hw" onclick="window.location = '/'">I Couldn't Find The Song, Return Home!</button>
            <h3 style="background:rgba(255, 255, 255, 0.7);text-align: center;color:green;">Please Select A Song To Add From The Search Results!</h3>
            <!-- Songs Below -->
          </tbody>
        </table>
      </div>
    </div>

    <!-- Frameworks -->
    <script src="/frameworks/jquery.min.js"></script>
    <script src="/script/dynamic-gradient.js"></script>
    <script src="/frameworks/popper.min.js"></script>
    <script src="/frameworks/bootstrap.min.js"></script>
    <script src="/script/submittion-song.js"></script>

    <script>
    var submitted = false;
    function submitSuggestion() {
      if (submitted != true) {
        submitted = true;
        $("#spinner").append('<i class="fa fa-spinner fa-spin"></i>');
        $.ajax({
             type: "POST",
             url: "/submit/stage1.php",
             data: $(".login-form").serialize(),
             success: function(data) {
                 if (data.startsWith("redirect_client:")) {
                    window.location.href = data.replace("redirect_client:", "");
                 } else {
                   var results = JSON.parse(data);

                   Object.keys(results).forEach(function(key,index) {
                     $("#songs").append(newSong(results[index]));
                   });

                   $(".login-page").fadeOut(function() {
                    $(".select-page").fadeIn();
                   });
                 }
             }
           });
      }
      return false;
    }
    </script>
  </body>
</html>
